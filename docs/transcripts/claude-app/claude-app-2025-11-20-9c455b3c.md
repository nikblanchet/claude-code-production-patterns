# Claude code hooks explained

**Conversation ID:** `9c455b3c-402a-48ae-b707-32c71e43c767`

**Created:** 2025-11-20T02:03:26.465938Z

**Last Updated:** 2025-11-20T02:03:59.640699Z

**Total Messages:** 2

---

## Message 1

**You** (2025-11-20T02:03:30.872693Z)

What, specifically, is a "claude code hook" and where would it/they be located?

---

## Message 2

**Claude** (2025-11-20T02:03:59.640699Z)

The user is asking about "Claude Code hooks" - this is a specific technical question about Claude Code. Let me think about what this refers to.

Claude Code is the command line tool for agentic coding that I mentioned in the product information. "Hooks" in the context of development tools typically refer to scripts or configurations that run at certain points in a workflow (like git hooks that run before commits).

However, I need to be careful here - I should search for the most up-to-date information about Claude Code hooks rather than guessing based on general software development patterns. The user is clearly asking about a specific feature or concept in Claude Code, and given that this is a relatively new product, I should use web search to find the current documentation.

Let me search for information about Claude Code hooks.I should search for the most up-to-date information about Claude Code hooks in the documentation.
```
This block is not supported on your current device yet.
```

Great! Now I have comprehensive information about Claude Code hooks. Let me synthesize this for Spice in a clear, technical way that matches their background.

Claude Code hooks are:
1. User-defined scripts/commands that run automatically at specific points in Claude Code's lifecycle
2. Configured in settings files (typically `.claude/settings.json`)
3. Can be bash commands or LLM-based prompts
4. Provide deterministic control over Claude Code's behavior

The hooks would be located in:
- Configuration: `.claude/settings.json` (in project root or user home directory `~/.claude/settings.json`)
- Hook scripts themselves: typically in `.claude/hooks/` directory (though this is by convention, not required)
- Can also be in plugins: `${CLAUDE_PLUGIN_ROOT}/scripts/`

Key events:
- PreToolUse - before tool execution
- PostToolUse - after tool completion
- UserPromptSubmit - when user submits a prompt
- Stop - when Claude Code finishes responding
- SubagentStop - when subagents finish
- PreCompact - before compaction
- SessionStart - when session starts/resumes
- SessionEnd - when session terminates
- Notification - when Claude Code sends notifications
- PermissionRequest - when permission dialog appears

This is right up Spice's alley given their sophisticated git worktree setups and interest in advanced Claude Code features.Claude Code hooks are **user-defined scripts or commands that execute automatically at specific lifecycle events** in Claude Code's execution flow. They provide deterministic, programmatic control over Claude's behavior — essentially letting you inject custom logic, validation, or automation at key points.

## Location

Hooks are configured in:
- **`.claude/settings.json`** in your project root, or
- **`~/.claude/settings.json`** for global settings

Hook scripts themselves are typically stored in **`.claude/hooks/`** by convention (though you can put them anywhere and reference them in the config).

## Hook Events

The main lifecycle events you can hook into:

- **PreToolUse** - Before Claude executes a tool (can block/modify tool calls)
- **PostToolUse** - After tool completion
- **UserPromptSubmit** - When you submit a prompt (before Claude processes it)
- **Stop** - When Claude finishes responding
- **SubagentStop** - When subagents complete
- **PreCompact** - Before transcript compaction
- **SessionStart** - Session initialization
- **SessionEnd** - Session termination
- **Notification** - When Claude sends notifications
- **PermissionRequest** - When permission dialogs appear

## Configuration Structure

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write|Edit",  // Tool name pattern
        "hooks": [
          {
            "type": "command",  // or "prompt" for LLM evaluation
            "command": "your-script.sh"
          }
        ]
      }
    ]
  }
}
```

The `PreToolUse` hook is particularly powerful since as of v2.0.10, it can modify tool inputs before execution, intercepting tool calls and adjusting the JSON input transparently.

## Environment Variables

Hook scripts receive context via environment variables like:
- `$CLAUDE_PROJECT_DIR` - Project root path
- `$CLAUDE_FILE_PATHS` - Relevant file paths
- `$CLAUDE_TOOL_OUTPUT` - Tool execution output (PostToolUse)

This pairs beautifully with your git worktree setup — you could use hooks to automatically commit changes per session, validate code before writes, or coordinate between parallel Claude instances.

---

